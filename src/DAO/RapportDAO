<?php

namespace GSB\DAO;

use GSB\Domain\Rapport;

class RapportDAO extends DAO
{
    public function findAll() {
	    $sql = "SELECT id,P.nom,dateRap,bilan,M.nom
 				FROM Praticien P, Rapport R,Motif M
 				WHERE P.id = R.id_Praticien
				AND R.id_motif = M.id
  				order by id desc";
	    $result = $this->getDb()->fetchAll($sql);

	    // Convert query result to an array of domain objects
	    $praticiens = array();
	    foreach ($result as $row) {
	        $RapportId = $row['id'];
	        $Rapports[$pRapportId] = $this->buildDomainObject($row);
	    }
	    return $Rapports;

	    dump($Rapports);
    }
}